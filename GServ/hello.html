<html>
  <head>
    <title>Yote Hello World Example</title>
    <script src="./js/jquery-latest.js"></script>
    <script src="./js/jquery.dumper.js"></script>
    <script src="./js/jquery.base64.min.js"></script>
    <script src="./js/json2.js"></script>
    <script src="./js/gserv.js"></script>
    <script>
    $().ready(function(){
        $.gServ.init("http://127.0.0.1/cgi-bin/gserv.cgi");
        var hello_app = $.gServ.get_app('GServ::Hello');
        
        $('#button').click( function() {
            var result = hello_app.hello({ name:$('#txt').val() } );
            alert( result );
        } );
    });
    </script>
  </head>
  <body>
    <h1>Yote Hello World Example</h1>
    <h2>Server Side Code</h2>
    <pre>
package GServ::Hello;

use strict;

use GServ::Obj;

use base 'GServ::AppRoot';

sub init {
    my $self = shift;
    #when the hello is created for the first time, install a counter to track how many times it is called
    $self-&gt;set_counter( new GServ::Obj() );  
}

sub hello {
    my( $self, $data, $acct ) = @_;
    my $name = $data-&gt;{name};
    $self-&gt;set_testfield(int(rand(10)); # set this to a random value each time
    my $counter = $self-&gt;get_counter(); # this could be counted with a field, but I wanted to demo how easy it is to send objects across.
    $counter-&gt;set_count( $counter-&gt;get_count() + 1 ); #increment the value in the counter
    return { r =&gt; "hello there '$name'. I have said hello ".$counter-&gt;get_count()." times." };
}

1;
    </pre>
    <h2>Client Side Code</h2>
    <pre>
&lt;html&gt;&lt;head&gt;&lt;title&gt;Hello World&lt;/title&gt;
&lt;script src="./js/jquery-latest.js"&gt;&lt;/script&gt;
&lt;script src="./js/jquery.dumper.js"&gt;&lt;/script&gt;
&lt;script src="./js/jquery.base64.min.js"&gt;&lt;/script&gt;
&lt;script src="./js/json2.js"&gt;&lt;/script&gt;
&lt;script src="./js/gserv.js"&gt;&lt;/script&gt;
&lt;script&gt;
  $().ready(function(){ 
      var hello_app = $.gServ.init("http://"+location.host+"/cgi-bin/gserv.cgi").get_app('GServ::Hello');
      $('#button').click( function() {
          var result = hello_app.hello({ name:$('#txt').val() } );
          alert( result ); //get the message from running the hello method.
          alert( 'testfield is ' + hello_app.get_testfield() ); //get the value of testfield that is attached to the app
          var counter = hello_app.get_counter();                //get the counter object that is attached to the app
          alert( 'counter is at ' + counter.get_count() );      //get the value of the count field of the counter object attached to the app
      } );
  });
&lt;/script&gt;&lt;/head&gt;
&lt;body&gt;&lt;h1&gt;Hello World&lt;/h1&gt;
&lt;input type=text id=txt&gt;&lt;BR&gt;&lt;button type=button id=button&gt;Say Hi&lt;/button&gt;
&lt;/body&gt;&lt;/html&gt;
    </pre>
    <hr>
    <h1>Hello World</h1>
    <input type=text id=txt><BR><button type=button id=button>Say Hi</button>
  </body>
</html>
